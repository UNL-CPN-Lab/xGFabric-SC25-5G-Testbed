networks:
  docker_ran:
    external: true

services:
  5gc:
    image: open5gs-docker
    build:
      context: ./docker/open5gs/
      args:
        OS_VERSION: "24.04"
        OPEN5GS_VERSION: "v2.7.0"
    env_file:
      - ${OPEN_5GS_ENV_FILE:-configs/open5gs.env}
    privileged: true
    volumes:
      - ./configs/open5gs-5gc.yml.in:/open5gs/open5gs-5gc.yml.in
      - ./configs/subscriber_db.csv:/open5gs/subscriber_db.csv
    ports:
      - "9999:9999/tcp"
      - "38412:38412/sctp"
      - "2152:2152/udp"
    command: ["5gc", "-c", "open5gs-5gc.yml"]
    networks:
      docker_ran:
        ipv4_address: ${OPEN5GS_IP:-10.53.1.2}